

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Quickstart &mdash; gtfs_tripify 0.0.1 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Tutorial" href="tutorial.html" />
    <link rel="prev" title="Installation" href="installation.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> gtfs_tripify
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial.html">Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="data_analysis_demo.html">Data analysis demo</a></li>
<li class="toctree-l1"><a class="reference internal" href="parse_errors.html">Parse errors</a></li>
<li class="toctree-l1"><a class="reference internal" href="api_reference.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="further_reading.html">Further reading</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">gtfs_tripify</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Quickstart</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/quickstart.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="quickstart">
<h1>Quickstart<a class="headerlink" href="#quickstart" title="Permalink to this headline">¶</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">gtfs-tripify</span></code> is a CLI and Python library for transforming archival GTFS-Realtime messages into
a tabular dataset of historical vehicle arrival and departure times. In this section of the
documentation, I will build a quick demonstration dataset using the <code class="docutils literal notranslate"><span class="pre">gtfs-tripify</span></code> command-line
interface.</p>
<p>To begin, make sure that you have Python 3.6 or newer <a class="reference external" href="https://realpython.com/installing-python/">installed and active</a>. Then run the
following <code class="docutils literal notranslate"><span class="pre">pip</span></code> package manager (comes included) command from your command line to install
<code class="docutils literal notranslate"><span class="pre">gtfs-tripify</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip install gtfs_tripify
</pre></div>
</div>
<p>We will also need some data. For the purposes of this demo, we’ll use some example data from the
MTA archive (this code snippet uses the <code class="docutils literal notranslate"><span class="pre">curl</span></code> Unix utility; Windows users, use a <code class="docutils literal notranslate"><span class="pre">curl</span></code>
alternative or download these files by hand):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>curl -O https://datamine-history.s3.amazonaws.com/gtfs-2014-09-17-09-31
curl -O https://datamine-history.s3.amazonaws.com/gtfs-2014-09-17-09-36
curl -O https://datamine-history.s3.amazonaws.com/gtfs-2014-09-17-09-41
</pre></div>
</div>
<p>This will create three GTFS-Realtime files on your machine, each containing a snapshot of the
state of the MTA system as of a certain date and time. We can turn these hard-to-read
binary-encoded messages into a simple CSV table using the <code class="docutils literal notranslate"><span class="pre">gtfs_tripify</span></code> CLI:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>gtfs_tripify logify ./ stops.csv --to csv --no-clean
</pre></div>
</div>
<p>This command tells <code class="docutils literal notranslate"><span class="pre">gtfs_tripify</span></code> to “logify” (transform into a tabular <strong>trip log</strong>) every
GTFS-Realtime message in the current folder and output the result to <code class="docutils literal notranslate"><span class="pre">stops.csv</span></code>. <code class="docutils literal notranslate"><span class="pre">--to</span> <span class="pre">csv</span></code>
instructs <code class="docutils literal notranslate"><span class="pre">gtfs_tripify</span></code> to output the data in a CSV format, and <code class="docutils literal notranslate"><span class="pre">--no-clean</span></code> instructs
<code class="docutils literal notranslate"><span class="pre">gtfs_tripify</span></code> not to drop partial trips from the file (we are using just fifteen minutes of
data in this demo).</p>
<p>The resulting file looks something like this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">trip_id</span><span class="p">,</span><span class="n">route_id</span><span class="p">,</span><span class="n">action</span><span class="p">,</span><span class="n">minimum_time</span><span class="p">,</span><span class="n">maximum_time</span><span class="p">,</span><span class="n">stop_id</span><span class="p">,</span><span class="n">latest_information_time</span><span class="p">,</span><span class="n">unique_trip_id</span>
<span class="mi">131750</span><span class="n">_7</span><span class="o">..</span><span class="n">N</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="n">STOPPED_OR_SKIPPED</span><span class="p">,</span><span class="mf">1559440299.0</span><span class="p">,</span><span class="mf">1559440695.0</span><span class="p">,</span><span class="mi">726</span><span class="n">N</span><span class="p">,</span><span class="mi">1559440315</span>
<span class="mi">131750</span><span class="n">_7</span><span class="o">..</span><span class="n">N</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="n">STOPPED_OR_SKIPPED</span><span class="p">,</span><span class="mf">1559440846.0</span><span class="p">,</span><span class="mf">1559440860.0</span><span class="p">,</span><span class="mi">725</span><span class="n">N</span><span class="p">,</span><span class="mi">1559440860</span>
<span class="mi">131750</span><span class="n">_7</span><span class="o">..</span><span class="n">N</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="n">STOPPED_OR_SKIPPED</span><span class="p">,</span><span class="mf">1559440936.0</span><span class="p">,</span><span class="mf">1559440950.0</span><span class="p">,</span><span class="mi">724</span><span class="n">N</span><span class="p">,</span><span class="mi">1559440950</span>
<span class="mi">131750</span><span class="n">_7</span><span class="o">..</span><span class="n">N</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="n">STOPPED_OR_SKIPPED</span><span class="p">,</span><span class="mf">1559441016.0</span><span class="p">,</span><span class="mf">1559441030.0</span><span class="p">,</span><span class="mi">723</span><span class="n">N</span><span class="p">,</span><span class="mi">1559441030</span>
<span class="mi">131750</span><span class="n">_7</span><span class="o">..</span><span class="n">N</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="n">STOPPED_OR_SKIPPED</span><span class="p">,</span><span class="mf">1559441211.0</span><span class="p">,</span><span class="mf">1559441226.0</span><span class="p">,</span><span class="mi">721</span><span class="n">N</span><span class="p">,</span><span class="mi">1559441226</span>
<span class="mi">131750</span><span class="n">_7</span><span class="o">..</span><span class="n">N</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="n">STOPPED_OR_SKIPPED</span><span class="p">,</span><span class="mf">1559441291.0</span><span class="p">,</span><span class="mf">1559441306.0</span><span class="p">,</span><span class="mi">720</span><span class="n">N</span><span class="p">,</span><span class="mi">1559441306</span>
<span class="mi">131750</span><span class="n">_7</span><span class="o">..</span><span class="n">N</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="n">STOPPED_OR_SKIPPED</span><span class="p">,</span><span class="mf">1559441411.0</span><span class="p">,</span><span class="mf">1559441426.0</span><span class="p">,</span><span class="mi">719</span><span class="n">N</span><span class="p">,</span><span class="mi">1559441426</span>
<span class="mi">131750</span><span class="n">_7</span><span class="o">..</span><span class="n">N</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="n">STOPPED_OR_SKIPPED</span><span class="p">,</span><span class="mf">1559441561.0</span><span class="p">,</span><span class="mf">1559441591.0</span><span class="p">,</span><span class="mi">718</span><span class="n">N</span><span class="p">,</span><span class="mi">1559441591</span>
<span class="mi">131750</span><span class="n">_7</span><span class="o">..</span><span class="n">N</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="n">STOPPED_OR_SKIPPED</span><span class="p">,</span><span class="mf">1559441942.0</span><span class="p">,</span><span class="mf">1559441956.0</span><span class="p">,</span><span class="mi">712</span><span class="n">N</span><span class="p">,</span><span class="mi">1559441956</span>
</pre></div>
</div>
<p>This dataset has the following schema:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">trip_id</span></code>: The ID assigned to the trip in the GTFS-Realtime record.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">route_id</span></code>: The ID of the route (e.g. <code class="docutils literal notranslate"><span class="pre">2</span></code> train, <code class="docutils literal notranslate"><span class="pre">3</span></code> train, etcetera).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">stop_id</span></code>: The ID assigned to the stop in question. To resolve this value to stop names,
please see the GTFS file for this transit system. The MTA for example hosts this file at
<a class="reference external" href="https://api.mta.info/">https://api.mta.info/</a>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">action</span></code>: The action that the given train took at the given stop. One of <code class="docutils literal notranslate"><span class="pre">STOPPED_AT</span></code>,
<code class="docutils literal notranslate"><span class="pre">STOPPED_OR_SKIPPED</span></code>, or <code class="docutils literal notranslate"><span class="pre">EN_ROUTE_TO</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">minimum_time</span></code>: The minimum arrival time. <a class="reference external" href="https://en.wikipedia.org/wiki/Unix_time">Unix timestamp</a>. If the first snapshot included
in the feed parse has this vehicle already at a station, this value will be set to null.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">maximum_time</span></code>: The maximum departure time. If the trip cuts out without a vehicle having
arrived at some of its stations this value will be set to null.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">latest_information_time</span></code>: The timestamp of the most recent GTFS-Realtime data feed
containing information pertinent to this record. Unix timestamp.</p></li>
</ul>
<p>That concludes this brisk introduction. For a more detailed demo see the <a class="reference external" href="https://residentmario.github.io/gtfs-tripify/tutorial.html">tutorial</a>. To
get a better idea of what you can do with this data, see the <a class="reference external" href="https://residentmario.github.io/gtfs-tripify/data_analysis_demo.html">data analysis demo</a>.</p>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="tutorial.html" class="btn btn-neutral float-right" title="Tutorial" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="installation.html" class="btn btn-neutral float-left" title="Installation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Aleksey Bilogur

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>